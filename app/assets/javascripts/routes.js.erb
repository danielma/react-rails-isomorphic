var nerp = <%= '"yeah"' %>;

var routes = <%=
fragment = /[^\/]+/
part = /:(#{fragment})/
Rails.application.routes.routes.find_all {|r|
  r.constraints[:request_method] && r.constraints[:request_method] == /^GET$/
}.map {|r|
  route = r.path.spec.to_s.sub("(.:format)", "")
  matches = route.scan(part).flatten
  regex = route.split(/:#{fragment}/, -1).join('([^\/]+)') + '$'
  {
    regex:    regex,
    matches:  matches,
    view: r.defaults
  }
}.to_json %>

var getRoute = function(location) {
  var r,
      foundRoute = null;
  routes.some(function(route) {
    if (location.match(route.regex)) {
      foundRoute = route;
      return true;
    }
  });
  return foundRoute;
}
