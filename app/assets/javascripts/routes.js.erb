var routes = <%=
Rails.application.routes.routes.find_all {|r|
  r.constraints[:request_method] && r.constraints[:request_method] == /^GET$/
}.map {|r|
  {
    format: r.path.spec.to_s.sub("(.:format)", ""),
    location: r.defaults
  }
}.to_json %>

var getRoute = function(location) {
  var foundRoute = null;
  routes.some(function(route) {
    if (route.format === location) {
      foundRoute = route.location;
      return true;
    }
    var r = new RegExp(route.format.split(/:[^\/]+/).join("[^\/]+") + "$");
    if (location.match(r)) {
      foundRoute = route.location;
      return true;
    }
  });
  return foundRoute;
}
